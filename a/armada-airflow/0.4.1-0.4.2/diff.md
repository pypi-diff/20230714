# Comparing `tmp/armada_airflow-0.4.1-py3-none-any.whl.zip` & `tmp/armada_airflow-0.4.2-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,17 +1,17 @@
-Zip file size: 19087 bytes, number of entries: 15
--rw-r--r--  2.0 unx        0 b- defN 23-Jun-16 16:33 armada/__init__.py
--rw-r--r--  2.0 unx        0 b- defN 23-Jun-16 16:35 armada/jobservice/__init__.py
--rw-r--r--  2.0 unx     2728 b- defN 23-Jun-16 16:35 armada/jobservice/jobservice_pb2.py
--rw-r--r--  2.0 unx     4122 b- defN 23-Jun-16 16:35 armada/jobservice/jobservice_pb2_grpc.py
--rw-r--r--  2.0 unx        0 b- defN 23-Jun-16 16:33 armada/operators/__init__.py
--rw-r--r--  2.0 unx     5544 b- defN 23-Jun-16 16:33 armada/operators/armada.py
--rw-r--r--  2.0 unx    12451 b- defN 23-Jun-16 16:33 armada/operators/armada_deferrable.py
--rw-r--r--  2.0 unx     1384 b- defN 23-Jun-16 16:33 armada/operators/jobservice.py
--rw-r--r--  2.0 unx     1542 b- defN 23-Jun-16 16:33 armada/operators/jobservice_asyncio.py
--rw-r--r--  2.0 unx    10090 b- defN 23-Jun-16 16:33 armada/operators/utils.py
--rw-r--r--  2.0 unx    11357 b- defN 23-Jun-16 16:42 armada_airflow-0.4.1.dist-info/LICENSE
--rw-r--r--  2.0 unx     3769 b- defN 23-Jun-16 16:42 armada_airflow-0.4.1.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 23-Jun-16 16:42 armada_airflow-0.4.1.dist-info/WHEEL
--rw-r--r--  2.0 unx        7 b- defN 23-Jun-16 16:42 armada_airflow-0.4.1.dist-info/top_level.txt
--rw-rw-r--  2.0 unx     1290 b- defN 23-Jun-16 16:42 armada_airflow-0.4.1.dist-info/RECORD
-15 files, 54376 bytes uncompressed, 16925 bytes compressed:  68.9%
+Zip file size: 19901 bytes, number of entries: 15
+-rw-r--r--  2.0 unx        0 b- defN 23-Jul-14 16:02 armada/__init__.py
+-rw-r--r--  2.0 unx        0 b- defN 23-Jul-14 16:08 armada/jobservice/__init__.py
+-rw-r--r--  2.0 unx     2891 b- defN 23-Jul-14 16:08 armada/jobservice/jobservice_pb2.py
+-rw-r--r--  2.0 unx     4122 b- defN 23-Jul-14 16:08 armada/jobservice/jobservice_pb2_grpc.py
+-rw-r--r--  2.0 unx        0 b- defN 23-Jul-14 16:02 armada/operators/__init__.py
+-rw-r--r--  2.0 unx     5544 b- defN 23-Jul-14 16:02 armada/operators/armada.py
+-rw-r--r--  2.0 unx    12637 b- defN 23-Jul-14 16:02 armada/operators/armada_deferrable.py
+-rw-r--r--  2.0 unx     3044 b- defN 23-Jul-14 16:02 armada/operators/jobservice.py
+-rw-r--r--  2.0 unx     2613 b- defN 23-Jul-14 16:02 armada/operators/jobservice_asyncio.py
+-rw-r--r--  2.0 unx    10090 b- defN 23-Jul-14 16:02 armada/operators/utils.py
+-rw-r--r--  2.0 unx    11357 b- defN 23-Jul-14 16:15 armada_airflow-0.4.2.dist-info/LICENSE
+-rw-r--r--  2.0 unx     3916 b- defN 23-Jul-14 16:15 armada_airflow-0.4.2.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 23-Jul-14 16:15 armada_airflow-0.4.2.dist-info/WHEEL
+-rw-r--r--  2.0 unx        7 b- defN 23-Jul-14 16:15 armada_airflow-0.4.2.dist-info/top_level.txt
+-rw-rw-r--  2.0 unx     1290 b- defN 23-Jul-14 16:15 armada_airflow-0.4.2.dist-info/RECORD
+15 files, 57603 bytes uncompressed, 17739 bytes compressed:  69.2%
```

## zipnote {}

```diff
@@ -24,23 +24,23 @@
 
 Filename: armada/operators/jobservice_asyncio.py
 Comment: 
 
 Filename: armada/operators/utils.py
 Comment: 
 
-Filename: armada_airflow-0.4.1.dist-info/LICENSE
+Filename: armada_airflow-0.4.2.dist-info/LICENSE
 Comment: 
 
-Filename: armada_airflow-0.4.1.dist-info/METADATA
+Filename: armada_airflow-0.4.2.dist-info/METADATA
 Comment: 
 
-Filename: armada_airflow-0.4.1.dist-info/WHEEL
+Filename: armada_airflow-0.4.2.dist-info/WHEEL
 Comment: 
 
-Filename: armada_airflow-0.4.1.dist-info/top_level.txt
+Filename: armada_airflow-0.4.2.dist-info/top_level.txt
 Comment: 
 
-Filename: armada_airflow-0.4.1.dist-info/RECORD
+Filename: armada_airflow-0.4.2.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## armada/jobservice/jobservice_pb2.py

```diff
@@ -1,37 +1,38 @@
 # -*- coding: utf-8 -*-
 # Generated by the protocol buffer compiler.  DO NOT EDIT!
 # source: jobservice.proto
 """Generated protocol buffer code."""
-from google.protobuf.internal import builder as _builder
 from google.protobuf import descriptor as _descriptor
 from google.protobuf import descriptor_pool as _descriptor_pool
 from google.protobuf import symbol_database as _symbol_database
+from google.protobuf.internal import builder as _builder
 # @@protoc_insertion_point(imports)
 
 _sym_db = _symbol_database.Default()
 
 
 from google.protobuf import empty_pb2 as google_dot_protobuf_dot_empty__pb2
 
 
 DESCRIPTOR = _descriptor_pool.Default().AddSerializedFile(b'\n\x10jobservice.proto\x12\njobservice\x1a\x1bgoogle/protobuf/empty.proto\"\x90\x01\n\x13HealthCheckResponse\x12=\n\x06status\x18\x01 \x01(\x0e\x32-.jobservice.HealthCheckResponse.ServingStatus\":\n\rServingStatus\x12\x0b\n\x07UNKNOWN\x10\x00\x12\x0b\n\x07SERVING\x10\x01\x12\x0f\n\x0bNOT_SERVING\x10\x02\"F\n\x11JobServiceRequest\x12\x0e\n\x06job_id\x18\x01 \x01(\t\x12\x12\n\njob_set_id\x18\x02 \x01(\t\x12\r\n\x05queue\x18\x03 \x01(\t\"\xe7\x01\n\x12JobServiceResponse\x12\x33\n\x05state\x18\x01 \x01(\x0e\x32$.jobservice.JobServiceResponse.State\x12\r\n\x05\x65rror\x18\x02 \x01(\t\"\x8c\x01\n\x05State\x12\r\n\tSUBMITTED\x10\x00\x12\x13\n\x0f\x44UPLICATE_FOUND\x10\x01\x12\x0b\n\x07RUNNING\x10\x02\x12\n\n\x06\x46\x41ILED\x10\x03\x12\r\n\tSUCCEEDED\x10\x04\x12\r\n\tCANCELLED\x10\x05\x12\x14\n\x10JOB_ID_NOT_FOUND\x10\x06\x12\x12\n\x0e\x43ONNECTION_ERR\x10\x07\x32\x9e\x01\n\nJobService\x12M\n\x0cGetJobStatus\x12\x1d.jobservice.JobServiceRequest\x1a\x1e.jobservice.JobServiceResponse\x12\x41\n\x06Health\x12\x16.google.protobuf.Empty\x1a\x1f.jobservice.HealthCheckResponseBVZ2github.com/armadaproject/armada/pkg/api/jobservice\xaa\x02\x1f\x41rmadaProject.Io.Api.JobServiceb\x06proto3')
 
-_builder.BuildMessageAndEnumDescriptors(DESCRIPTOR, globals())
-_builder.BuildTopDescriptorsAndMessages(DESCRIPTOR, 'jobservice_pb2', globals())
+_globals = globals()
+_builder.BuildMessageAndEnumDescriptors(DESCRIPTOR, _globals)
+_builder.BuildTopDescriptorsAndMessages(DESCRIPTOR, 'jobservice_pb2', _globals)
 if _descriptor._USE_C_DESCRIPTORS == False:
 
   DESCRIPTOR._options = None
   DESCRIPTOR._serialized_options = b'Z2github.com/armadaproject/armada/pkg/api/jobservice\252\002\037ArmadaProject.Io.Api.JobService'
-  _HEALTHCHECKRESPONSE._serialized_start=62
-  _HEALTHCHECKRESPONSE._serialized_end=206
-  _HEALTHCHECKRESPONSE_SERVINGSTATUS._serialized_start=148
-  _HEALTHCHECKRESPONSE_SERVINGSTATUS._serialized_end=206
-  _JOBSERVICEREQUEST._serialized_start=208
-  _JOBSERVICEREQUEST._serialized_end=278
-  _JOBSERVICERESPONSE._serialized_start=281
-  _JOBSERVICERESPONSE._serialized_end=512
-  _JOBSERVICERESPONSE_STATE._serialized_start=372
-  _JOBSERVICERESPONSE_STATE._serialized_end=512
-  _JOBSERVICE._serialized_start=515
-  _JOBSERVICE._serialized_end=673
+  _globals['_HEALTHCHECKRESPONSE']._serialized_start=62
+  _globals['_HEALTHCHECKRESPONSE']._serialized_end=206
+  _globals['_HEALTHCHECKRESPONSE_SERVINGSTATUS']._serialized_start=148
+  _globals['_HEALTHCHECKRESPONSE_SERVINGSTATUS']._serialized_end=206
+  _globals['_JOBSERVICEREQUEST']._serialized_start=208
+  _globals['_JOBSERVICEREQUEST']._serialized_end=278
+  _globals['_JOBSERVICERESPONSE']._serialized_start=281
+  _globals['_JOBSERVICERESPONSE']._serialized_end=512
+  _globals['_JOBSERVICERESPONSE_STATE']._serialized_start=372
+  _globals['_JOBSERVICERESPONSE_STATE']._serialized_end=512
+  _globals['_JOBSERVICE']._serialized_start=515
+  _globals['_JOBSERVICE']._serialized_end=673
 # @@protoc_insertion_point(module_scope)
```

## armada/operators/armada_deferrable.py

```diff
@@ -25,15 +25,18 @@
 from airflow.models import BaseOperator
 from airflow.triggers.base import BaseTrigger, TriggerEvent
 from airflow.utils.context import Context
 
 from armada_client.armada.submit_pb2 import JobSubmitRequestItem
 from armada_client.client import ArmadaClient
 
-from armada.operators.jobservice import JobServiceClient
+from armada.operators.jobservice import (
+    JobServiceClient,
+    default_jobservice_channel_options,
+)
 from armada.operators.jobservice_asyncio import JobServiceAsyncIOClient
 from armada.operators.utils import (
     airflow_error,
     search_for_job_complete_async,
     annotate_job_request_items,
 )
 from armada.jobservice import jobservice_pb2
@@ -61,15 +64,15 @@
     """
     Implementation of a deferrable armada operator for airflow.
 
     Distinguished from ArmadaOperator by its ability to defer itself after
     submitting its job_request_items.
 
     See
-        https://airflow.apache.org/docs/apache-airflow/stable/authoring-and-scheduling/deferring.html
+    https://airflow.apache.org/docs/apache-airflow/stable/authoring-and-scheduling/deferring.html
     for more information about deferrable airflow operators.
 
     Airflow operators inherit from BaseOperator.
 
     :param name: The name of the airflow task.
     :param armada_channel_args: GRPC channel arguments to be used when creating
       a grpc channel to connect to the armada server instance.
@@ -96,14 +99,18 @@
         job_request_items: List[JobSubmitRequestItem],
         lookout_url_template: Optional[str] = None,
         **kwargs,
     ) -> None:
         super().__init__(**kwargs)
         self.name = name
         self.armada_channel_args = GrpcChannelArguments(**armada_channel_args)
+
+        if "options" not in job_service_channel_args:
+            job_service_channel_args["options"] = default_jobservice_channel_options
+
         self.job_service_channel_args = GrpcChannelArguments(**job_service_channel_args)
         self.armada_queue = armada_queue
         self.job_request_items = job_request_items
         self.lookout_url_template = lookout_url_template
 
     def execute(self, context) -> None:
         """
```

## armada/operators/jobservice.py

```diff
@@ -1,11 +1,37 @@
+import json
+from typing import Optional
+
 from armada.jobservice import jobservice_pb2_grpc, jobservice_pb2
 
+import grpc
 from google.protobuf import empty_pb2
 
+default_jobservice_channel_options = [
+    (
+        "grpc.service_config",
+        json.dumps(
+            {
+                "methodConfig": [
+                    {
+                        "name": [{"service": "jobservice.JobService"}],
+                        "retryPolicy": {
+                            "maxAttempts": 6 * 5,  # A little under 5 minutes.
+                            "initialBackoff": "0.1s",
+                            "maxBackoff": "10s",
+                            "backoffMultiplier": 2,
+                            "retryableStatusCodes": ["UNAVAILABLE"],
+                        },
+                    }
+                ]
+            }
+        ),
+    )
+]
+
 
 class JobServiceClient:
     """
     The JobService Client
 
     Implementation of gRPC stubs from JobService
 
@@ -34,7 +60,38 @@
             queue=queue, job_set_id=job_set_id, job_id=job_id
         )
         return self.job_stub.GetJobStatus(job_service_request)
 
     def health(self) -> jobservice_pb2.HealthCheckResponse:
         """Health Check for GRPC Request"""
         return self.job_stub.Health(request=empty_pb2.Empty())
+
+
+def get_retryable_job_service_client(
+    target: str,
+    credentials: Optional[grpc.ChannelCredentials] = None,
+    compression: Optional[grpc.Compression] = None,
+) -> JobServiceClient:
+    """
+    Get a JobServiceClient that has retry configured
+
+    :param target: grpc channel target
+    :param credentials: grpc channel credentials (if needed)
+    :param compresion: grpc channel compression
+
+    :return: A job service client instance
+    """
+    channel = None
+    if credentials is None:
+        channel = grpc.insecure_channel(
+            target=target,
+            options=default_jobservice_channel_options,
+            compression=compression,
+        )
+    else:
+        channel = grpc.secure_channel(
+            target=target,
+            credentials=credentials,
+            options=default_jobservice_channel_options,
+            compression=compression,
+        )
+    return JobServiceClient(channel)
```

## armada/operators/jobservice_asyncio.py

```diff
@@ -1,10 +1,15 @@
-from armada.jobservice import jobservice_pb2_grpc, jobservice_pb2
+from armada.jobservice import (
+    jobservice_pb2_grpc,
+    jobservice_pb2,
+)
+from armada.operators.jobservice import default_jobservice_channel_options
 
 import grpc
+from typing import Optional
 
 from google.protobuf import empty_pb2
 
 
 class JobServiceAsyncIOClient:
     """
     The JobService AsyncIO Client
@@ -38,7 +43,38 @@
         response = await self.job_stub.GetJobStatus(job_service_request)
         return response
 
     async def health(self) -> jobservice_pb2.HealthCheckResponse:
         """Health Check for GRPC Request"""
         response = await self.job_stub.Health(request=empty_pb2.Empty())
         return response
+
+
+def get_retryable_job_service_asyncio_client(
+    target: str,
+    credentials: Optional[grpc.ChannelCredentials],
+    compression: Optional[grpc.Compression],
+) -> JobServiceAsyncIOClient:
+    """
+    Get a JobServiceAsyncIOClient that has retry configured
+
+    :param target: grpc channel target
+    :param credentials: grpc channel credentials (if needed)
+    :param compresion: grpc channel compression
+
+    :return: A job service asyncio client instance
+    """
+    channel = None
+    if credentials is None:
+        channel = grpc.aio.insecure_channel(
+            target=target,
+            options=default_jobservice_channel_options,
+            compression=compression,
+        )
+    else:
+        channel = grpc.aio.secure_channel(
+            target=target,
+            credentials=credentials,
+            options=default_jobservice_channel_options,
+            compression=compression,
+        )
+    return JobServiceAsyncIOClient(channel)
```

## Comparing `armada_airflow-0.4.1.dist-info/LICENSE` & `armada_airflow-0.4.2.dist-info/LICENSE`

 * *Files identical despite different names*

## Comparing `armada_airflow-0.4.1.dist-info/METADATA` & `armada_airflow-0.4.2.dist-info/METADATA`

 * *Files 6% similar despite different names*

```diff
@@ -1,28 +1,30 @@
 Metadata-Version: 2.1
 Name: armada-airflow
-Version: 0.4.1
+Version: 0.4.2
 Summary: Armada Airflow Operator
 Author-email: Armada-GROSS <armada@armadaproject.io>
 License: Apache Software License
 Requires-Python: >=3.7
 Description-Content-Type: text/markdown
 License-File: LICENSE
 Requires-Dist: armada-client
-Requires-Dist: apache-airflow (>=2.3.1)
+Requires-Dist: apache-airflow (>=2.6.3)
 Requires-Dist: grpcio (>=1.46.3)
 Requires-Dist: grpcio-tools (>=1.46.3)
 Requires-Dist: types-protobuf (>=3.19.22)
 Provides-Extra: docs
-Requires-Dist: sphinx ; extra == 'docs'
-Requires-Dist: sphinx-jekyll-builder ; extra == 'docs'
+Requires-Dist: sphinx (==7.0.1) ; extra == 'docs'
+Requires-Dist: sphinx-jekyll-builder (==0.3.0) ; extra == 'docs'
+Requires-Dist: sphinx-toolbox (==3.2.0b1) ; extra == 'docs'
+Requires-Dist: sphinx-markdown-builder (==0.5.5) ; extra == 'docs'
 Provides-Extra: format
 Requires-Dist: black (==23.3.0) ; extra == 'format'
 Requires-Dist: flake8 (==6.0.0) ; extra == 'format'
-Requires-Dist: pylint (==2.17.3) ; extra == 'format'
+Requires-Dist: pylint (==2.17.4) ; extra == 'format'
 Provides-Extra: test
 Requires-Dist: pytest (==7.3.1) ; extra == 'test'
 Requires-Dist: coverage (>=6.5.0) ; extra == 'test'
 Requires-Dist: pytest-asyncio (==0.21.0) ; extra == 'test'
 
 # armada-airflow-operator
```

## Comparing `armada_airflow-0.4.1.dist-info/RECORD` & `armada_airflow-0.4.2.dist-info/RECORD`

 * *Files 24% similar despite different names*

```diff
@@ -1,15 +1,15 @@
 armada/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 armada/jobservice/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
-armada/jobservice/jobservice_pb2.py,sha256=qqr5DOfjMVk0nImQPBPoN9tSBVz9oRt2o90VNAxWARI,2728
+armada/jobservice/jobservice_pb2.py,sha256=idcVXwvH0EeYCcyBcloshRhh_JQhCpLn5a2-LPqkxIU,2891
 armada/jobservice/jobservice_pb2_grpc.py,sha256=ApiwP6_oYV8oHFlRC7oFum3I0aeEFQ9RE-7cNuaUmOk,4122
 armada/operators/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 armada/operators/armada.py,sha256=kMsanRTjwqhuhAdMqZpkJNWwML60gorOgc6rHxwInNs,5544
-armada/operators/armada_deferrable.py,sha256=uuxLOKsRoNcR7vfc6iREx1EeIIJqvIjdUe1BMx8JrRo,12451
-armada/operators/jobservice.py,sha256=3K7aIsu-VU42gwLHPMYLqItV4CEJ6ovwn46hSXQGRgU,1384
-armada/operators/jobservice_asyncio.py,sha256=9dJwTuV0OslVavBJVcf1tzb7uU3tuimou8o35lLEdn0,1542
+armada/operators/armada_deferrable.py,sha256=VAp0Oh3XtCipPbTcuERuRlzAYmI_evse1HhcqoSy8QM,12637
+armada/operators/jobservice.py,sha256=_Rrrmz6NqbEeATWegdabjMv7y7dEGUzWy5hgKS23-8o,3044
+armada/operators/jobservice_asyncio.py,sha256=DmtzNfSroAheBj-pAOeUZ6lZcx4UItUNt08DFvH3cIA,2613
 armada/operators/utils.py,sha256=ZKgFazRLXNp__htb-ZqLkWW95rm6Z5VNvtNmxCzkyQw,10090
-armada_airflow-0.4.1.dist-info/LICENSE,sha256=xx0jnfkXJvxRnG63LTGOxlggYnIysveWIZ6H3PNdCrQ,11357
-armada_airflow-0.4.1.dist-info/METADATA,sha256=1gjpAHpu5wGW-wuwrCEn2utOGmM8xmBzSEIxexzIJWM,3769
-armada_airflow-0.4.1.dist-info/WHEEL,sha256=pkctZYzUS4AYVn6dJ-7367OJZivF2e8RA9b_ZBjif18,92
-armada_airflow-0.4.1.dist-info/top_level.txt,sha256=SaKoRDJJ1bkA2Lly_EYCX5D9VxncOV0eEI5NYBHU-bs,7
-armada_airflow-0.4.1.dist-info/RECORD,,
+armada_airflow-0.4.2.dist-info/LICENSE,sha256=xx0jnfkXJvxRnG63LTGOxlggYnIysveWIZ6H3PNdCrQ,11357
+armada_airflow-0.4.2.dist-info/METADATA,sha256=b7l4gnkinGr9OJtVt_ulUim8Zqkx1n3-j0YNLEFBEBM,3916
+armada_airflow-0.4.2.dist-info/WHEEL,sha256=pkctZYzUS4AYVn6dJ-7367OJZivF2e8RA9b_ZBjif18,92
+armada_airflow-0.4.2.dist-info/top_level.txt,sha256=SaKoRDJJ1bkA2Lly_EYCX5D9VxncOV0eEI5NYBHU-bs,7
+armada_airflow-0.4.2.dist-info/RECORD,,
```

